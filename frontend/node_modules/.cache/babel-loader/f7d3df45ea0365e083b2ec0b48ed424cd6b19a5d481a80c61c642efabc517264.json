{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setMessages } from \"../redux/messageSlice\";\nconst useGetRealTimeMessage = () => {\n  _s();\n  console.log(\"Entered in useGetRealTimeMessage\");\n  console.log(\"Entered in useGetRealTimeMessage\");\n  const {\n    socket\n  } = useSelector(store => store.socket);\n  const messages = useSelector(store => store.message.messages); // Assuming messages is an array in message slice\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (socket) {\n      console.log(\"Socket is available\", socket);\n      socket.on(\"newMessage\", newMessage => {\n        console.log(\"newMessage\", newMessage);\n        dispatch(setMessages([...messages, newMessage]));\n      });\n      console.log(\"Socket not avaliable\");\n\n      // Cleanup to remove the event listener when the component unmounts or socket changes\n      return () => {\n        socket.off(\"newMessage\");\n      };\n    }\n  }, [socket, messages, dispatch]);\n  return null; // If the hook does not return anything\n};\n_s(useGetRealTimeMessage, \"6CKTaPzADYiVSZWg9kJfE53VDZE=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\nexport default useGetRealTimeMessage;\n\n// import { useEffect } from \"react\";\n// import { useDispatch, useSelector } from \"react-redux\";\n// import { setMessages } from \"../redux/messageSlice\";\n\n// const useGetRealTimeMessage = () => {\n//     const { socket } = useSelector((store) => store.socket);\n//     const { messages } = useSelector((store) => store.message);\n//     const dispatch = useDispatch();\n\n//     useEffect(() => {\n//         if (socket) {\n//             const handleNewMessage = (newMessage) => {\n//               dispatch(setMessages([...messages, newMessage]));\n//               console.log(\"Received new message:\", newMessage)\n//             };\n\n//             socket.on(\"newMessage\", handleNewMessage);\n\n//             // Clean up the event listener when the component unmounts\n//             return () => {\n//                 socket.off(\"newMessage\", handleNewMessage);\n//             };\n//         }\n//     }, [socket, messages, dispatch]);\n\n//     return null; // No UI output needed from this hook\n// };\n\n// export default useGetRealTimeMessage;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","setMessages","useGetRealTimeMessage","_s","console","log","socket","store","messages","message","dispatch","on","newMessage","off"],"sources":["C:/Users/hardik/OneDrive/Desktop/LiveChatApplication/frontend/src/Hooks/useRealTimeMessages.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setMessages } from \"../redux/messageSlice\";\r\n\r\nconst useGetRealTimeMessage = () => {\r\n   console.log(\"Entered in useGetRealTimeMessage\")\r\n   console.log(\"Entered in useGetRealTimeMessage\")\r\n    const { socket } = useSelector(store => store.socket);\r\n    const messages = useSelector(store => store.message.messages); // Assuming messages is an array in message slice\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (socket) {\r\n            console.log(\"Socket is available\", socket);\r\n            socket.on(\"newMessage\", (newMessage) => {\r\n                console.log(\"newMessage\", newMessage);\r\n                dispatch(setMessages([...messages, newMessage]));\r\n            });\r\n            console.log(\"Socket not avaliable\")\r\n\r\n            // Cleanup to remove the event listener when the component unmounts or socket changes\r\n            return () => {\r\n                socket.off(\"newMessage\");\r\n            };\r\n        }\r\n    }, [socket, messages, dispatch]);\r\n\r\n    return null; // If the hook does not return anything\r\n};\r\n\r\nexport default useGetRealTimeMessage;\r\n\r\n\r\n\r\n// import { useEffect } from \"react\";\r\n// import { useDispatch, useSelector } from \"react-redux\";\r\n// import { setMessages } from \"../redux/messageSlice\";\r\n\r\n// const useGetRealTimeMessage = () => {\r\n//     const { socket } = useSelector((store) => store.socket);\r\n//     const { messages } = useSelector((store) => store.message);\r\n//     const dispatch = useDispatch();\r\n\r\n//     useEffect(() => {\r\n//         if (socket) {\r\n//             const handleNewMessage = (newMessage) => {\r\n//               dispatch(setMessages([...messages, newMessage]));\r\n//               console.log(\"Received new message:\", newMessage)\r\n//             };\r\n\r\n//             socket.on(\"newMessage\", handleNewMessage);\r\n\r\n//             // Clean up the event listener when the component unmounts\r\n//             return () => {\r\n//                 socket.off(\"newMessage\", handleNewMessage);\r\n//             };\r\n//         }\r\n//     }, [socket, messages, dispatch]);\r\n\r\n//     return null; // No UI output needed from this hook\r\n// };\r\n\r\n// export default useGetRealTimeMessage;\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,WAAW,QAAQ,uBAAuB;AAEnD,MAAMC,qBAAqB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjCC,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;EAC/CD,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;EAC9C,MAAM;IAAEC;EAAO,CAAC,GAAGN,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACD,MAAM,CAAC;EACrD,MAAME,QAAQ,GAAGR,WAAW,CAACO,KAAK,IAAIA,KAAK,CAACE,OAAO,CAACD,QAAQ,CAAC,CAAC,CAAC;EAC/D,MAAME,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACZ,IAAIQ,MAAM,EAAE;MACRF,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEC,MAAM,CAAC;MAC1CA,MAAM,CAACK,EAAE,CAAC,YAAY,EAAGC,UAAU,IAAK;QACpCR,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEO,UAAU,CAAC;QACrCF,QAAQ,CAACT,WAAW,CAAC,CAAC,GAAGO,QAAQ,EAAEI,UAAU,CAAC,CAAC,CAAC;MACpD,CAAC,CAAC;MACFR,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;;MAEnC;MACA,OAAO,MAAM;QACTC,MAAM,CAACO,GAAG,CAAC,YAAY,CAAC;MAC5B,CAAC;IACL;EACJ,CAAC,EAAE,CAACP,MAAM,EAAEE,QAAQ,EAAEE,QAAQ,CAAC,CAAC;EAEhC,OAAO,IAAI,CAAC,CAAC;AACjB,CAAC;AAACP,EAAA,CAxBID,qBAAqB;EAAA,QAGJF,WAAW,EACbA,WAAW,EACXD,WAAW;AAAA;AAqBhC,eAAeG,qBAAqB;;AAIpC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}